---
import { type CollectionEntry, getCollection, render } from 'astro:content';
import BlogPost from '../../layouts/BlogPost.astro';

export async function getStaticPaths() {
	const posts = await getCollection('articles');
	return posts.map((post) => ({
		params: { slug: post.id },
		props: post,
	}));
}
type Props = CollectionEntry<'articles'>;

const post = Astro.props;
const { Content } = await render(post);
const tags = post.data.tags || [];
---

<BlogPost {...post.data}>
	{tags.length > 0 && (
		<div class="tags">
			{tags.map((tag: string) => (
				<a href={`/articles/tag/${tag}/`} class="tag">#{tag}</a>
			))}
		</div>
	)}
	<Content />
</BlogPost>

<style>
	.tags {
		display: flex;
		flex-wrap: wrap;
		gap: 0.5rem;
		margin-bottom: 1.5rem;
		justify-content: center;
	}
	.tag {
		display: inline-block;
		padding: 0.25rem 0.75rem;
		background-color: rgb(var(--gray-light));
		color: rgb(var(--accent));
		border-radius: 999px;
		font-size: 0.875rem;
		text-decoration: none;
	}
	.tag:hover {
		background-color: rgb(var(--accent));
		color: white;
	}
</style>
